# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

## –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –£–∑–Ω–∞–π—Ç–µ –≤–∞—à Telegram User ID:
   - –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ [@userinfobot](https://t.me/userinfobot) –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à ID (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456789`)

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:

   **–í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
   ```bash
   cd backend
   export TELEGRAM_ADMIN_ID=123456789
   python -m scripts.make_admin
   ```

   **–í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏**
   ```bash
   cd backend
   python -m scripts.make_admin 123456789
   ```

   –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:
   ```bash
   TELEGRAM_ADMIN_ID=123456789
   ```
   –¢–æ–≥–¥–∞ —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `.env`.

3. –û—Ç–∫—Ä–æ–π—Ç–µ WebApp –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **DebugHub ‚Üí –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ SQL (–ø—Ä—è–º–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö)

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL:

```sql
-- –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID
SELECT id, telegram_id, username, first_name, is_admin 
FROM users 
WHERE telegram_id = 123456789;

-- –°–¥–µ–ª–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–¥–º–∏–Ω–æ–º
UPDATE users 
SET is_admin = true 
WHERE telegram_id = 123456789;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
SELECT id, telegram_id, username, is_admin 
FROM users 
WHERE telegram_id = 123456789;
```

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ Python –∫–æ–Ω—Å–æ–ª—å

```python
from app.database import AsyncSessionLocal
from app.models import User
import asyncio

async def make_admin(telegram_id: int):
    async with AsyncSessionLocal() as db:
        user = await db.execute(
            select(User).where(User.telegram_id == telegram_id)
        )
        user = user.scalar_one_or_none()
        if user:
            user.is_admin = True
            await db.commit()
            print(f"‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {telegram_id} —Ç–µ–ø–µ—Ä—å –∞–¥–º–∏–Ω!")
        else:
            print(f"‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω")

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
asyncio.run(make_admin(123456789))
```

## –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

–ü–æ—Å–ª–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º:

1. –û—Ç–∫—Ä–æ–π—Ç–µ WebApp –≤ Telegram
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **DebugHub** (–≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω)
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É **"–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å"** (–ø–æ—è–≤–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)
4. –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞–ø—Ä—è–º—É—é: `?screen=admin`

## –§—É–Ω–∫—Ü–∏–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û–∂–∏–¥–∞—é—â–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –û–∂–∏–¥–∞—é—â–∏—Ö –≤—ã–≤–æ–¥–æ–≤
- –û–±—â–∏–π –¥–æ—Ö–æ–¥
- –û–±—â–∏–µ –≤—ã–ø–ª–∞—Ç—ã

### üí≥ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞–º–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –æ–∂–∏–¥–∞—é—â–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –û–¥–æ–±—Ä–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –æ–ø–ª–∞—Ç—ã

### üí∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞–º–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –æ–∂–∏–¥–∞—é—â–∏—Ö –≤—ã–≤–æ–¥–æ–≤
- –û–¥–æ–±—Ä–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤—ã–≤–æ–¥–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã

### üë§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—á–µ—Ä–µ–∑ API)
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
- –ë–∞–Ω/—Ä–∞–∑–±–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## API Endpoints –¥–ª—è –∞–¥–º–∏–Ω–æ–≤

–í—Å–µ endpoints —Ç—Ä–µ–±—É—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `admin_id` –∏ –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤:

- `GET /api/admin/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/admin/payments/pending` - –°–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞—é—â–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- `GET /api/admin/withdrawals/pending` - –°–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞—é—â–∏—Ö –≤—ã–≤–æ–¥–æ–≤
- `POST /api/admin/payment/action` - –û–¥–æ–±—Ä–∏—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å –ø–ª–∞—Ç–µ–∂
- `POST /api/admin/withdrawal/action` - –û–¥–æ–±—Ä–∏—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å –≤—ã–≤–æ–¥
- `POST /api/admin/user/{user_id}/credits` - –ò–∑–º–µ–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å
- `POST /api/admin/user/{user_id}/ban` - –ó–∞–±–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/admin/user/{user_id}/unban` - –†–∞–∑–±–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å `is_admin = true` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- Telegram `init_data` –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
